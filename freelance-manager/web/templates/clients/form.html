{% extends "base.html" %}

{% block title %}{{ 'Modifier' if client else 'Nouveau' }} client - Freelance Manager{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('clients_list') }}">Clients</a></li>
                <li class="breadcrumb-item active">{{ 'Modifier' if client else 'Nouveau' }}</li>
            </ol>
        </nav>
        <h1>
            <i class="bi bi-person-{{ 'gear' if client else 'plus' }} me-2"></i>
            {{ 'Modifier le client' if client else 'Nouveau client' }}
        </h1>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-body">
                <form method="POST" action="{{ url_for('client_edit', client_id=client.id) if client else url_for('client_new') }}">

                    <h5 class="mb-3"><i class="bi bi-building me-2"></i>Informations société</h5>

                    <div class="row g-3 mb-4">
                        <div class="col-md-8">
                            <label for="nom" class="form-label">Nom / Raison sociale *</label>
                            <input type="text" class="form-control" id="nom" name="nom"
                                   value="{{ client.nom if client else '' }}" required>
                        </div>
                        <div class="col-md-4">
                            <label for="siret" class="form-label">SIRET</label>
                            <input type="text" class="form-control" id="siret" name="siret"
                                   value="{{ client.siret if client else '' }}"
                                   placeholder="XXX XXX XXX XXXXX">
                        </div>
                    </div>

                    <h5 class="mb-3"><i class="bi bi-geo-alt me-2"></i>Adresse</h5>

                    <div class="row g-3 mb-4">
                        <div class="col-12">
                            <label for="adresse" class="form-label">Adresse</label>
                            <input type="text" class="form-control" id="adresse" name="adresse"
                                   value="{{ client.adresse if client else '' }}">
                        </div>
                        <div class="col-md-4">
                            <label for="code_postal" class="form-label">Code postal</label>
                            <input type="text" class="form-control" id="code_postal" name="code_postal"
                                   value="{{ client.code_postal if client else '' }}">
                        </div>
                        <div class="col-md-8">
                            <label for="ville" class="form-label">Ville</label>
                            <input type="text" class="form-control" id="ville" name="ville"
                                   value="{{ client.ville if client else '' }}">
                        </div>
                    </div>

                    <h5 class="mb-3"><i class="bi bi-person-lines-fill me-2"></i>Contact</h5>

                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <label for="contact_nom" class="form-label">Nom du contact</label>
                            <input type="text" class="form-control" id="contact_nom" name="contact_nom"
                                   value="{{ client.contact_nom if client else '' }}">
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email"
                                   value="{{ client.email if client else '' }}">
                        </div>
                        <div class="col-md-6">
                            <label for="telephone" class="form-label">Téléphone</label>
                            <input type="tel" class="form-control" id="telephone" name="telephone"
                                   value="{{ client.telephone if client else '' }}">
                        </div>
                    </div>

                    <hr>

                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('clients_list') }}" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left me-1"></i>Annuler
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-lg me-1"></i>
                            {{ 'Enregistrer' if client else 'Créer le client' }}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card bg-light">
            <div class="card-body">
                <h6><i class="bi bi-info-circle me-2"></i>Aide</h6>
                <p class="small text-muted mb-2">
                    Renseignez les informations du client. Le SIRET est optionnel mais recommandé pour les factures.
                </p>
                <p class="small text-muted mb-0">
                    Les champs marqués d'un * sont obligatoires.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
